webpackJsonp([50],{gaYZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("WS73"),a=(i("NYxO"),i("IcnI")),s={name:"otlMeeting",data:function(){return{form:{meetingTitle:void 0,title:void 0,beginTime:void 0,place:void 0,needApply:void 0,applyStatus:void 0,applyUid:void 0,meetingStatus:void 0,createdUid:void 0,readTotal:void 0,createdTime:void 0,updatedTime:void 0},peopleForm:{mid:void 0,uid:void 0,isRead:void 0,isSignin:void 0,readTime:void 0,signTime:void 0},list:null,total:null,listLoading:!0,userId:a.a.state.user.userId,listQuery:{page:1,limit:10,mId:void 0,createdUid:a.a.state.user.userId,lifeType:7},dialogFormVisible:!1,dialogStatus:"",otlMeetingManager_btn_edit:!0,otlMeetingManager_btn_del:!1,otlMeetingManager_btn_add:!1,textMap:{update:"编辑",create:"创建"},tableKey:0,isRead:void 0,signMid:void 0,isSignin:void 0,stateFlag:void 0}},created:function(){this.getList()},methods:{printContent:function(){var e=document.getElementById("subOutputRank-print");console.log(e.innerHTML);var t=e.innerHTML,i=document.body.innerHTML;return document.body.innerHTML=t,window.print(),window.location.reload(),document.body.innerHTML=i,!1},getList:function(){var e=this;Object(n.c)(this.listQuery).then(function(t){e.list=t.data.rows,e.total=t.data.total,e.listLoading=!1})},state:function(){var e=this;this.peopleForm.isSignin=1,this.dialogFormVisible=!1,Object(n.d)(this.signMid,this.userId,this.peopleForm).then(function(t){e.stateFlag=t,e.peopleForm.isSignin=void 0,e.stateFlag?e.$notify({title:"成功",message:"签到成功",type:"success",duration:2e3}):e.$notify.error({title:"错误",message:"签到失败"})}),this.getList()},handleFilter:function(){this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleCreate:function(){this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){var t=this;this.signMid=e.mid,Object(n.b)(e.mid,this.userId).then(function(i){t.isSignin=i[0].isSignin,t.isRead=i[0].isRead,0===t.isRead&&(t.peopleForm.isRead=1,Object(n.d)(e.mid,t.userId,t.peopleForm).then(function(){t.peopleForm.isRead=void 0}))}),Object(n.a)(e.mid).then(function(e){t.form=e.data.rows,t.ommVo=t.form[0].ommVo,t.omp=t.form[0].omp,t.dialogFormVisible=!0,t.dialogStatus=t.form[0].meetingTitle})},cancel:function(){this.dialogFormVisible=!1}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"姓名或账户"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.mId,callback:function(t){e.$set(e.listQuery,"mId",t)},expression:"listQuery.mId"}}),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),e.otlMeetingManager_btn_add?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:e.handleCreate}},[e._v("添加")]):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"活动主题"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"活动时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.beginTime))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"支部"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.deptId))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"活动跟踪"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.meetingStatusMessage))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"申请状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.applyStatus))])]}}])}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.otlMeetingManager_btn_edit?i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){e.handleUpdate(t.row)}}},[e._v("\n            查看\n          ")]):e._e()]}}])})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.dialogStatus,visible:e.dialogFormVisible,id:"subOutputRank-print"},on:{"update:visible":function(t){e.dialogFormVisible=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{"text-align":"center"}},[i("h1",[e._v(e._s(e.form[0].title))])]),e._v(" "),i("p",[e._v("开始时间："+e._s(e.form[0].beginTime))]),e._v(" "),i("p",[e._v("活动地点："+e._s(e.form[0].place))]),e._v(" "),i("p",[e._v("接收方："+e._s(e.form[0].accepts))]),e._v(" "),i("p",[e._v("发起类型："+e._s(e.form[0].enumDesc))]),e._v(" "),i("p",[e._v("主持人："+e._s(e.form[0].compere))]),e._v(" "),i("p",[e._v("主持人联系方式："+e._s(e.form[0].comperePhone))]),e._v(" "),i("p",[e._v("列席人员："+e._s(e.form[0].attendance))]),e._v(" "),e._l(e.ommVo,function(t){return i("p",[e._v(e._s(t.field)+" : "+e._s(t.fieldValue))])}),e._v(" "),i("div",[e._v("备注："+e._s(e.form[0].remarks))]),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.form,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.remarks))])]}}])})],1)]}}])},[i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[0===e.isSignin?i("el-button",{attrs:{type:"success"},on:{click:function(t){e.state()}}},[e._v("\n        签到\n      ")]):e._e(),e._v(" "),1===e.isSignin?i("el-button",{attrs:{disabled:"",type:"success"}},[e._v("\n        已签\n      ")]):e._e(),e._v(" "),i("el-button",{attrs:{type:"success"},on:{click:function(t){e.printContent()}}},[e._v("打印")]),e._v(" "),i("el-button",{attrs:{type:"success"},on:{click:function(t){e.cancel()}}},[e._v("返 回")])],1)])],1)},staticRenderFns:[]},l=i("VU/8")(s,o,!1,null,null,null);t.default=l.exports}});