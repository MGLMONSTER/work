webpackJsonp([27],{"2TNH":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("iHFQ"),a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container calendar-list-container"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"活动名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.title,callback:function(t){e.$set(e.listQuery,"title",t)},expression:"listQuery.title"}}),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),e.otlMeetTypeManager_btn_add?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:function(t){e.handleCreate("meet")}}},[e._v("添加模板")]):e._e()],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"活动类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.title))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[5===t.row.createdUid?i("span",[e._v("李兆基")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.createdTime))])]}}])}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.otlMeetTypeManager_btn_edit?i("el-button",{attrs:{size:"small",type:"success"},on:{click:function(i){e.handleUpdate(t.row)}}},[e._v("编辑模板")]):e._e(),e._v(" "),e.otlMeetTypeManager_btn_del?i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){e.handleDelete(t.row)}}},[e._v("删除模板")]):e._e()]}}])})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"35%","close-on-click-modal":e.modalClose},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("el-form",{ref:"formMeet",attrs:{"label-width":"150px",id:"dynamic_form",rules:e.meet,model:e.formMeet}},[i("el-form-item",{attrs:{label:"活动名称",prop:"title"}},[i("el-input",{staticStyle:{width:"60%"},model:{value:e.formMeet.title,callback:function(t){e.$set(e.formMeet,"title",t)},expression:"formMeet.title"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发起类型",prop:"needApply"}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择"},on:{change:function(t){e.needType(e.formMeet.needApply)}},model:{value:e.formMeet.needApply,callback:function(t){e.$set(e.formMeet,"needApply",t)},expression:"formMeet.needApply"}},e._l(e.meetTypes,function(e){return i("el-option",{key:e.meetTypeId,attrs:{label:e.meetTypeName,value:e.meetTypeId}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"接收方"}},[i("el-input",{staticStyle:{width:"60%"},attrs:{disabled:!0},model:{value:e.formMeet.accepts,callback:function(t){e.$set(e.formMeet,"accepts",t)},expression:"formMeet.accepts"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"参与人员"}},[i("el-tree",{ref:"tree",attrs:{data:e.data,props:e.defaultProps,"show-checkbox":"","node-key":"id"},on:{"check-change":e.checkChange}})],1),e._v(" "),i("el-form-item",{attrs:{label:"列席人员",prop:"attendance"}},[i("el-input",{staticStyle:{width:"60%"},model:{value:e.formMeet.attendance,callback:function(t){e.$set(e.formMeet,"attendance",t)},expression:"formMeet.attendance"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"拟定地点",prop:"place"}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择"},model:{value:e.formMeet.place,callback:function(t){e.$set(e.formMeet,"place",t)},expression:"formMeet.place"}},e._l(e.places,function(e){return i("el-option",{key:e.id,attrs:{label:e.place,value:e.place}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"开始时间",prop:"beginTime"}},[i("el-date-picker",{staticStyle:{width:"60%"},attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.formMeet.beginTime,callback:function(t){e.$set(e.formMeet,"beginTime",t)},expression:"formMeet.beginTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"主持人",prop:"compere"}},[i("el-input",{staticStyle:{width:"60%"},model:{value:e.formMeet.compere,callback:function(t){e.$set(e.formMeet,"compere",t)},expression:"formMeet.compere"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"主持人联系方式",prop:"comperePhone"}},[i("el-input",{staticStyle:{width:"60%"},attrs:{"auto-complete":"off"},model:{value:e.formMeet.comperePhone,callback:function(t){e.$set(e.formMeet,"comperePhone",e._n(t))},expression:"formMeet.comperePhone"}})],1),e._v(" "),i("i",{domProps:{innerHTML:e._s(e.form.content)}}),e._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:e.formMeet.remarks,callback:function(t){e.$set(e.formMeet,"remarks",t)},expression:"formMeet.remarks"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.state()}}},[e._v("添加字段")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"35%","close-on-click-modal":e.modalClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.flag?i("el-form",{ref:"formData",attrs:{"label-width":"80px",rules:e.formField,model:e.formData}},[i("el-form-item",{attrs:{label:"字段名",prop:"meetName"}},[i("el-input",{staticStyle:{width:"60%"},model:{value:e.formData.meetName,callback:function(t){e.$set(e.formData,"meetName",t)},expression:"formData.meetName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"选择类型",prop:"type"}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择类型"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.fieldOptions,function(e){return i("el-option",{key:e.fieldId,attrs:{label:e.fieldName,value:e.fieldId}})}))],1)],1):i("el-form",{attrs:{"label-width":"80px",id:"fixedForm"}},[i("el-form-item",{attrs:{label:"活动类型"}},[i("el-input",{staticStyle:{width:"60%"},model:{value:e.editableTabs.title,callback:function(t){e.$set(e.editableTabs,"title",t)},expression:"editableTabs.title"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.cancel("formData")}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createTab()}}},[e._v("确 定")]):i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createField("formData")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=function(e){i("YdzK")},n=i("VU/8")(l.a,a,!1,o,null,null);t.default=n.exports},HIDO:function(e,t,i){"use strict";t.e=function(e){return Object(l.a)({url:"/api/olt/otlMeetTemplate",method:"post",data:e})},t.l=function(e){return Object(l.a)({url:"/api/olt/otlMeetTemplate/page",method:"get",params:e})},t.g=function(e){return Object(l.a)({url:"/api/olt/otlMeetTemplate/delectEntity/"+e,method:"delete"})},t.h=function(){return Object(l.a)({url:"/api/olt/otlMeetTemplate/getCount",method:"get"})},t.m=function(e,t){return Object(l.a)({url:"/api/olt/otlMeetTemplate/updateElementCount/"+e,method:"put",data:t})},t.k=function(e){return Object(l.a)({url:"/api/olt/otlMeetPlace/page",method:"get",params:e})},t.d=function(e){return Object(l.a)({url:"/api/olt/otlMeetPlace",method:"post",data:e})},t.a=function(e){return Object(l.a)({url:"/api/olt/otlMeeting/getKeyIdInsert",method:"post",data:e})},t.b=function(e){return Object(l.a)({url:"/api/olt/otlMeeting/insertOfMeetField",method:"post",data:e})},t.j=function(e){return Object(l.a)({url:"/api/olt/otlMeetType/page",method:"get",params:e})},t.c=function(e){return Object(l.a)({url:"/api/olt/otlMeetType",method:"post",data:e})},t.i=function(e){return Object(l.a)({url:"/api/olt/otlMeetType/"+e,method:"get"})},t.f=function(e){return Object(l.a)({url:"/api/olt/otlMeetType/"+e,method:"delete"})},t.n=function(e,t){return Object(l.a)({url:"/api/olt/otlMeetType/"+e,method:"put",data:t})};var l=i("vLgD")},YdzK:function(e,t,i){var l=i("ZMOs");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);i("rjj0")("6da2e383",l,!0)},ZMOs:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,'\n.app{\n\twidth:100%;\n\theight: 500px;\n}\n.app_top{\n\twidth:500px;\n\tmargin:0 auto;\n\tborder:1px solid;\n}\n.clearfix:{\n&after{\n\tdisplay: block;\n\tvisibility: hidden;\n\tclear: both;\n\theight: 0;\n\tcontent: " ";\n}\n}\n.clearfix{\n\tzoom:1;\n}\n\n',""])},iHFQ:function(e,t,i){"use strict";(function(e){var l=i("HIDO");i("NYxO");t.a={name:"otlMeetType",data:function(){return{places:[],modalClose:!1,flag:!1,editableTabs:{needApply:void 0,title:void 0,content:"",total:void 0},dialogFormVisible:!1,dialogTableVisible:!1,dialogPlaceVisible:!1,meetTypes:[{meetTypeName:"通知",meetTypeId:0},{meetTypeName:"申请",meetTypeId:1}],listData:[],fieldOptions:[{fieldName:"文本框",fieldId:0},{fieldName:"文本域",fieldId:1},{fieldName:"日期选择框",fieldId:4}],label:1,formMeet:{mtid:void 0,title:void 0,beginTime:void 0,place:void 0,needApply:void 0,accepts:"",applyStatus:void 0,applyUid:void 0,meetingStatus:void 0,createdUid:void 0,readTotal:void 0,createdTime:void 0,updatedTime:void 0,meetingDeptid:void 0,compere:"",comperePhone:"",remarks:"",attendance:""},formPlace:{id:void 0,place:void 0,total:void 0,status:void 0},MeetField:[],form:{needApply:void 0,title:void 0,content:"",createdUid:void 0,status:void 0,createdTime:void 0},newTabName:null,formData:{type:void 0,meetName:""},meet:{title:[{required:!0,message:"请输入活动名称",trigger:"blur"}],needApply:[{required:!0,message:"请选择类型"}],place:[{required:!0,message:"请选择活动地点",trigger:"change"}],beginTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],compere:[{required:!0,message:"请输入主持人",trigger:"blur"}],comperePhone:[{required:!0,message:"请输入主持人联系方式"},{type:"number",message:"联系方式必须为数字值"}],remarks:[{required:!0,message:"请输入备注",trigger:"blur"}],attendance:[{required:!0,message:"请输入列席人员",trigger:"blur"}]},formField:{meetName:[{required:!0,message:"请输入字段名",trigger:"blur"},{min:1,message:"名字不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择类型"}]},listQuery:{page:1,limit:10,title:void 0},listQueryt:{page:null,limit:null,mTId:void 0},dialogStatus:"",otlMeetTypeManager_btn_edit:!0,otlMeetTypeManager_btn_del:!0,otlMeetTypeManager_btn_add:!0,textMap:{update:"编辑",create:"创建"},list:null,tlist:null,total:null,listLoading:!0,tableKey:0,fieldCount:null,data:[],defaultProps:{children:"childList",label:"name"},tree:[]}},created:function(){this.getList()},methods:{checkChange:function(e){this.tree=this.$refs.tree.getCheckedKeys(!0)},getList:function(){var e=this;this.listLoading=!0,Object(l.j)(this.listQuery).then(function(t){e.list=t.data.rows,e.total=t.data.total,e.listLoading=!1}),Object(l.h)().then(function(t){e.fieldCount=t[0]}),Object(l.k)().then(function(t){e.places=t})},needType:function(){0===this.formMeet.needApply?this.formMeet.accepts="下级党组织":1===this.formMeet.needApply&&(this.formMeet.accepts="上级党组织党务工作者")},createField:function(e){var t=this;this.$refs[e].validate(function(e){e&&Object(l.h)().then(function(e){if(t.fieldCount=respons[0],t.dialogFormVisible=!1,0===t.formData.type){++t.fieldCount.idCount;var i='<div class="el-form-item el-form-item--medium"><label class="el-form-item__label" style="width: 150px; font-style:normal">'+t.formData.meetName+'</label><div class="el-form-item__content" style="margin-left:150px;"><div class="el-input el-input--medium"><input id=field'+t.fieldCount.idCount+' class="el-input__inner" type="text" validateevent="true" rows="2" autocomplete="off" style="width: 60%"class="el-input__inner"></input></div></div></div>';t.form.content=t.form.content+i}else if(1===t.formData.type){++t.fieldCount.idCount;i='<div class="el-form-item el-form-item--medium"><label class="el-form-item__label" style="width: 150px; font-style:normal">'+t.formData.meetName+'</label><div class="el-form-item__content" style="margin-left: 150px;"><div class="el-textarea el-input--medium"><textarea id=field'+t.fieldCount.idCount+' class="el-textarea__inner" style="min-height:80px;width: 60%" validateevent="true" rows="2" type="textarea" autocomplete="off"></textarea></div></div></div>';t.form.content=t.form.content+i}else if(4===t.formData.type){++t.fieldCount.idCount;i='<div class="el-form-item el-form-item--medium"><label class="el-form-item__label" style="width: 150px; font-style:normal">'+t.formData.meetName+'</label><div class="el-form-item__content" style="margin-left:150px;"><div class="el-input el-input--medium"><input id=field'+t.fieldCount.idCount+' class="el-input__inner" type="datetime-local" validateevent="true" rows="2" autocomplete="off" style="width: 60%"class="el-input__inner"></input></div></div></div>';t.form.content=t.form.content+i}t.listData.push({mtid:t.form.mtid,field:t.formData.meetName,fieldType:t.formData.type,fieldId:"field"+t.fieldCount.idCount}),Object(l.m)(t.fieldCount.id,t.fieldCount).then(function(){}),t.update()})})},createTab:function(){var e=this;this.dialogFormVisible=!1,Object(l.c)(this.editableTabs).then(function(){e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.getList()})},placeCreate:function(){var e=this;Object(l.d)(this.formPlace).then(function(){e.dialogPlaceVisible=!1,e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.getList()})},state:function(){this.dialogFormVisible=!0,this.flag=!0},handleFilter:function(){this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleCreate:function(e){"meet"===e?(this.flag=!1,this.dialogStatus="create",this.dialogFormVisible=!0):"place"===e&&(this.dialogPlaceVisible=!0)},handleUpdate:function(e){var t=this;Object(l.i)(e.mtid).then(function(e){t.form=e.data,t.dialogTableVisible=!0,t.dialogStatus="update"})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(l.f)(e.mtid).then(function(i){Object(l.g)(e.mtid).then(function(){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3})});var a=t.list.indexOf(e);t.list.splice(a,1)})}),this.form.content=""},cancel:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},Release:function(t){var i=this;this.formMeet.mtid=this.form.mtid,this.$refs[t].validate(function(t){Object(l.a)(i.formMeet).then(function(e){}),i.listQueryt.mTId=i.form.mtid,Object(l.l)(i.listQueryt).then(function(t){i.tlist=t.data.rows;for(var a=0;a<i.tlist.length;a++)i.MeetField.push({field:i.tlist[a].field,fieldId:i.tlist[a].fieldId,fieldType:i.tlist[a].fieldType,fieldValue:e("#"+i.tlist[a].fieldId).val()}),Object(l.b)(i.MeetField[a]).then(function(){});i.tlist=void 0,i.dialogTableVisible=!1,i.$notify({title:"成功",message:"发布成功",type:"success",duration:2e3})})})},update:function(){var e=this;this.listData.forEach(function(e,t){Object(l.e)(e).then(function(){})}),this.listData=[],this.form.createdUid=5,Object(l.n)(this.form.mtid,this.form).then(function(t){e.$notify({title:"成功",message:"添加成功",type:"success",duration:2e3})})}}}}).call(t,i("7t+N"))}});